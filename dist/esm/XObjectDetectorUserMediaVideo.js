import{_ as t,a as e}from"./_rollupPluginBabelHelpers-ed8cbb08.js";import{L as n,c as o,h as a}from"./lit-element-51727a0b.js";import{getBasePathWithTrailingSlash as r,defineCustomElement as i}from"./utilities.js";import d from"./index.js";import"./class-map-d74af20d.js";import"./mwc-snackbar-b8a221fd.js";import"./mwc-button-e0830c8f.js";import"./XObjectDetector-6b71cbce.js";function c(){var t=e(['\n      <p class="helper-text">Use the buttons below to enable the camera and start object detection.</p>\n      <div id="player-container">\n        <div id="controls">\n          <mwc-button id="btn_off" ?disabled='," @click=",'>Off</mwc-button>\n          <mwc-button id="btn_on" ?disabled='," @click=",'>On</mwc-button>\n        </div>\n      </div>\n      <div id="x-object-detector-container">\n        <x-object-detector\n          @x-object-detector-image-drag-over=',"\n          @x-object-detector-image-drop=","\n          @x-object-detector-image-drag-leave=","\n          @x-object-detector-object-detected=","\n          @x-object-detector-image-loading-failure=","\n          @x-object-detector-video-loading-failure=","\n          @x-object-detector-no-object-detected=","\n          @x-object-detector-ready-to-predict=","\n          imgUrl=","\n          wasmPath=",'\n        >\n          <div class="svg-wrapper">\n            <h3>Loading...</h3>\n            <tfjs-component-playground-loading></tfjs-component-playground-loading>\n          </div>\n        </x-object-detector>\n      </div>\n      <mwc-snackbar labelText="','"></mwc-snackbar>\n    ']);return c=function(){return t},t}function s(){var t=e(["\n      :host {\n        text-align: var(--tfjs-component-playground-text-align, center);\n        width: 100%;\n      }\n\n      img {\n        height: 100%;\n        width: 100%;\n      }\n\n      .helper-text {\n        margin: 0;\n        padding: 0 0.5rem;\n      }\n\n      .svg-wrapper h3 {\n        position: absolute;\n        width: 100%;\n      }\n\n      a {\n        color: var(--tfjs-component-playground-link-color, blue);\n        text-decoration: var(--tfjs-component-playground-link-text-decoration, underline);\n      }\n\n      a:hover {\n        color: var(--tfjs-component-playground-link-hover-color, darkblue);\n        text-decoration: var(--tfjs-component-playground-link-hover-text-decoration, underline);\n      }\n\n      #player-container {\n        margin: auto;\n        width: 20rem;\n      }\n\n      #controls {\n        display: inline-flex;\n        justify-content: center;\n        margin-bottom: 1rem;\n        width: 100%;\n      }\n\n      mwc-button {\n        background-color: var(--tfjs-component-playground-button-background-color, initial);\n        border-radius: var(--tfjs-component-playground-button-border-radius, 4px);\n        border: var(--tfjs-component-playground-button-border, 1px outset rgb(200, 200, 200));\n        display: block;\n        font: var(--tfjs-component-playground-button-font, 400 13.3333px Arial);\n        height: var(--tfjs-component-playground-button-height, initial);\n        margin: var(--tfjs-component-playground-button-margin, initial);\n        padding: var(--tfjs-component-playground-button-padding, initial);\n        width: var(--tfjs-component-playground-button-width, initial);\n      }\n\n      mwc-snackbar {\n        text-align: center;\n      }\n    "]);return s=function(){return t},t}class l extends n{static get styles(){return o(s())}static get properties(){return{maxId:{type:String},minId:{type:String},range:{type:String},userId:{type:String},imgUrl:{type:String},wasmPath:{type:String},snackLabel:{type:String,reflect:!1}}}constructor(){super(),t(this,"_path",r()),this.userId=d.main.userId,this.wasmPath=d.main.wasmPath,this.snackLabel="",this._isVideoEnabled=!1,this._isDetectionEnabled=!1,this._isOnButtonDisabled=!0}_handleXObjectDetectorImageDragOver(t){this.shadowRoot.getElementById("x-object-detector-container").style.backgroundColor="rgba(128, 128, 128, 0.5)"}_handleXObjectDetectorImageDrop(t){this.shadowRoot.getElementById("x-object-detector-container").style.backgroundColor="rgba(0, 0, 0, 0)"}_handleXObjectDetectorImageDragLeave(t){this.shadowRoot.getElementById("x-object-detector-container").style.backgroundColor="rgba(0, 0, 0, 0)"}_handleXObjectDetectorImageLoadingFailure(t){this.snackLabel="Image failed to load",this.shadowRoot.querySelector("mwc-snackbar").open()}_handleXObjectDetectorVideoLoadingFailure(t){this.snackLabel="Video failed to load",this.shadowRoot.querySelector("mwc-snackbar").open(),this._isVideoEnabled=!1,this._isDetectionEnabled=!1,this.shadowRoot.querySelector("x-object-detector")._loadingElement.style.display="none",this.shadowRoot.getElementById("btn_on").disabled=!1}_handleXObjectDetectorObjectDetected(t){var{detail:e}=t,n="".concat(Number(100*e.score).toString().substr(0,5),"%");this.snackLabel="".concat(n," | ").concat(e.class),this.shadowRoot.querySelector("mwc-snackbar").open()}_handleXObjectDetectorNoObjectDetected(t){this.snackLabel="No object detected.",this.shadowRoot.querySelector("mwc-snackbar").open()}_handleXObjectDetectorReadyToPredict(t){var e=t.detail;this._isOnButtonDisabled=!e,this.requestUpdate()}_handleOnButton(t){t.currentTarget.disabled=!0;var e=this.shadowRoot.querySelector("x-object-detector");return e.startVideo().then(t=>{this._isVideoEnabled=t,this._isDetectionEnabled=t,e.startPredictions(),this.requestUpdate()})}_handleOffButton(){var t=this.shadowRoot.querySelector("x-object-detector");return t.stopPredictions(),t.stopVideo().then(t=>{this._isVideoEnabled=t,this._isDetectionEnabled=t,this.requestUpdate()}).then(()=>{t._handleImageUrlPrediction(t.shadowRoot.getElementById("canvas"),t.imgUrl)})}render(){var t=d.main.imgUrl;return a(c(),!this._isDetectionEnabled&&!this._isVideoEnabled,this._handleOffButton,this._isOnButtonDisabled||this._isDetectionEnabled&&this._isVideoEnabled,this._handleOnButton,this._handleXObjectDetectorImageDragOver,this._handleXObjectDetectorImageDrop,this._handleXObjectDetectorImageDragLeave,this._handleXObjectDetectorObjectDetected,this._handleXObjectDetectorImageLoadingFailure,this._handleXObjectDetectorVideoLoadingFailure,this._handleXObjectDetectorNoObjectDetected,this._handleXObjectDetectorReadyToPredict,t+this.userId,this.wasmPath,this.snackLabel)}}i("x-object-detector-user-media-video",l);export{l as XObjectDetectorUserMediaVideo};
