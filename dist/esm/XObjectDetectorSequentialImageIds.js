import{a as t}from"./_rollupPluginBabelHelpers-ed8cbb08.js";import{L as e,c as n,h as o}from"./lit-element-51727a0b.js";import{TFJSComponentPlaygroundSequentialImageIdChange as a}from"./events.js";import{defineCustomElement as r}from"./utilities.js";import i from"./index.js";import"./class-map-d74af20d.js";import"./mwc-snackbar-b8a221fd.js";import"./form-element-300125b4.js";import"./mwc-slider-d35821e3.js";import"./mwc-button-e0830c8f.js";import"./mwc-dialog-3b5ca302.js";import"./XObjectDetector-6b71cbce.js";function s(){var e=t(['\n              <li style="list-style-type: none;">',"</li>\n            "]);return s=function(){return e},e}function d(){var e=t(['<mwc-button slot="action">View</mwc-button>']);return d=function(){return e},e}function c(){var e=t(['\n      <p class="helper-text">Click the player buttons and use the scrollbar to browse images from ','.</p>\n      <p class="helper-text">Or, drag and drop a file from your computer onto the current image.</p>\n      <div id="player-container">\n        <mwc-slider\n          pin\n          step="1"\n          markers\n          max="','"\n          min="','"\n          value="','"\n          @change=',"\n          ?disabled=",'\n        ></mwc-slider>\n        <div id="controls">\n          <mwc-button id="play" ?disabled='," @click=",'>play</mwc-button>\n          <mwc-button id="previous" ?disabled='," @click=",'>previous</mwc-button>\n          <mwc-button id="stop" ?disabled='," @click=",'>stop</mwc-button>\n          <mwc-button id="next" ?disabled='," @click=",'>next</mwc-button>\n        </div>\n      </div>\n      <div id="link"><a href="','">','</a></div>\n      <div id="x-object-detector-container">\n        <a href="','">\n          <x-object-detector\n            draw\n            label\n            strokeStyle="red"\n            labelTextColor="yellow"\n            labelBGColor="blue"\n            labelFontSize="16"\n            maxNumBoxes="8"\n            lineWidth="3"\n            @x-object-detector-image-drag-over=',"\n            @x-object-detector-image-drop=","\n            @x-object-detector-image-drag-leave=","\n            @x-object-detector-object-detected=","\n            @x-object-detector-image-loading-failure=","\n            @x-object-detector-no-object-detected=","\n            @x-object-detector-ready-to-predict=","\n            imgUrl=","\n            maxId=","\n            minId=","\n            wasmPath=",'\n          >\n            <div class="svg-wrapper">\n              <h3>Loading...</h3>\n              <tfjs-component-playground-loading></tfjs-component-playground-loading>\n            </div>\n          </x-object-detector>\n        </a>\n      </div>\n      <mwc-snackbar\n        @MDCSnackbar:closing=','\n        labelText="','">\n        ','\n      </mwc-snackbar>\n      <mwc-dialog heading="Object',' detected">\n        <ul>\n          ','\n        </ul>\n        <mwc-button slot="primaryAction" dialogAction="discard">\n          OK\n        </mwc-button>\n      </mwc-dialog>\n    ']);return c=function(){return e},e}function l(){var e=t(["\n      :host {\n        text-align: var(--tfjs-component-playground-text-align, center);\n\n        width: 100%;\n      }\n\n      img {\n        height: 100%;\n        width: 100%;\n      }\n\n      a {\n        color: var(--tfjs-component-playground-link-color, blue);\n        text-decoration: var(--tfjs-component-playground-link-text-decoration, underline);\n      }\n\n      a:hover {\n        color: var(--tfjs-component-playground-link-hover-color, darkblue);\n        text-decoration: var(--tfjs-component-playground-link-hover-text-decoration, underline);\n      }\n\n      .helper-text {\n        margin: 0;\n        padding: 0 0.5rem;\n      }\n\n      .svg-wrapper h3 {\n        position: absolute;\n        width: 100%;\n      }\n\n      #player-container {\n        margin: auto;\n        max-width: 22.5rem;\n      }\n\n      #controls {\n        margin-bottom: 1rem;\n        display: inline-flex;\n        justify-content: space-between;\n        width: 100%;\n      }\n\n      #link {\n        margin-bottom: 1rem;\n      }\n\n      mwc-slider {\n        width: 90%;\n      }\n\n      mwc-snackbar {\n        text-align: center;\n      }\n\n      mwc-button {\n        background-color: var(--tfjs-component-playground-button-background-color, initial);\n        border-radius: var(--tfjs-component-playground-button-border-radius, 4px);\n        border: var(--tfjs-component-playground-button-border, 1px outset rgb(200, 200, 200));\n        display: block;\n        font: var(--tfjs-component-playground-button-font, 400 13.3333px Arial);\n        height: var(--tfjs-component-playground-button-height, initial);\n        margin: var(--tfjs-component-playground-button-margin, initial);\n        padding: var(--tfjs-component-playground-button-padding, initial);\n        width: var(--tfjs-component-playground-button-width, initial);\n      }\n    "]);return l=function(){return e},e}class h extends e{static get styles(){return n(l())}static get properties(){return{maxId:{type:String},minId:{type:String},range:{type:String},userId:{type:String},imgUrl:{type:String},wasmPath:{type:String},snackLabel:{type:String,reflect:!1}}}constructor(){super(),this.userId=i.main.userId,this.wasmPath=i.main.wasmPath,this._areControlsDisabled=!0,this._objectList=[],this.snackLabel=""}_handleXObjectDetectorImageDragOver(t){this.shadowRoot.getElementById("x-object-detector-container").style.backgroundColor="rgba(128, 128, 128, 0.5)"}_handleXObjectDetectorImageDrop(t){this._objectList=[],this.shadowRoot.getElementById("x-object-detector-container").style.backgroundColor="rgba(0, 0, 0, 0)"}_handleXObjectDetectorImageDragLeave(t){this.shadowRoot.getElementById("x-object-detector-container").style.backgroundColor="rgba(0, 0, 0, 0)"}_handleXObjectDetectorImageLoadingFailure(t){this.snackLabel="Image failed to load",this.shadowRoot.querySelector("mwc-snackbar").open()}_handleXObjectDetectorObjectDetected(t){var{detail:e}=t,n="".concat(Number(100*e.score).toString().substr(0,5),"%"),o="".concat(n," | ").concat(e.class);this._objectList.push(o),this.snackLabel=1===this._objectList.length?o:"Objects detected.",this.shadowRoot.querySelector("mwc-snackbar").open()}_handleXObjectDetectorNoObjectDetected(t){this.snackLabel="No object detected.",this.shadowRoot.querySelector("mwc-snackbar").open()}_decrementId(){return this.userId--===Number(this.minId)&&(this.userId=this.maxId),this.userId}_incrementId(){return this.userId++===Number(this.maxId)&&(this.userId=this.minId),this.userId}_getNewLocation(t,e){return t.shift(),t.pop(),t.push(e),t.join("/")}_handleSlideChange(t){t.preventDefault();var{value:e}=t.target;this._handleHistoryChange(e),this.userId=e}_handleXObjectDetectorReadyToPredict(t){var e=t.detail;this._areControlsDisabled=!e,this.requestUpdate()}_handlePlay(){this.interval=setInterval(()=>{this._handleHistoryChange(this._incrementId())},1e3),this.shadowRoot.querySelector("#play").disabled=!0}_handleStop(){clearInterval(this.interval),this.shadowRoot.querySelector("#play").disabled=!1}_handleHistoryChange(t){this._objectList=[],this.shadowRoot.dispatchEvent(a(t)),history.pushState({},"","/".concat(this._getNewLocation(location.pathname.split("/"))).concat(t))}_handleNext(){this._handleHistoryChange(this._incrementId())}_handlePrevious(){this._handleHistoryChange(this._decrementId())}_handleSnackClose(t){var{detail:e}=t;"action"===e.reason&&(this.shadowRoot.querySelector("mwc-dialog").open=!0)}firstUpdated(){var t=this.range?this.range:i.main.range,e=t.split("x")[0],n=t.split("x")[1];e&&n&&(this.minId=e,this.maxId=n)}render(){var t=void 0;try{t=atob(this.imgUrl)}catch(e){t=i.main.imgUrl}return o(c(),t,this.maxId,this.minId,this.userId,this._handleSlideChange,this._areControlsDisabled,this._areControlsDisabled,this._handlePlay,this._areControlsDisabled,this._handlePrevious,this._areControlsDisabled,this._handleStop,this._areControlsDisabled,this._handleNext,t+this.userId,this.userId,t+this.userId,this._handleXObjectDetectorImageDragOver,this._handleXObjectDetectorImageDrop,this._handleXObjectDetectorImageDragLeave,this._handleXObjectDetectorObjectDetected,this._handleXObjectDetectorImageLoadingFailure,this._handleXObjectDetectorNoObjectDetected,this._handleXObjectDetectorReadyToPredict,t+this.userId,this.maxId,this.minId,this.wasmPath,this._handleSnackClose,this.snackLabel,this._objectList.length>1?o(d()):"",this._objectList.length>1?"s":"",this._objectList.map(t=>o(s(),t)))}}r("x-object-detector-sequential-image-ids",h);export{h as XObjectDetectorSequentialImageIds};
