import{d as t,N as e,i as s,p as o,a as i,L as r,h as n}from"./lit-element-51727a0b.js";import{store as a}from"./configureStore.js";import{c}from"./connect-mixin-144a42a2.js";import{decrementCount as p,incrementCount as l}from"./creators.js";
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const h=new WeakMap,u=t(t=>o=>{if(!(o instanceof e))throw new Error("unsafeHTML can only be used in text bindings");const i=h.get(o);if(void 0!==i&&s(t)&&t===i.value&&o.value===i.fragment)return;const r=document.createElement("template");r.innerHTML=t;const n=document.importNode(r.content,!0);o.setValue(n),h.set(o,{value:t,fragment:n})});const d=(t,e)=>{const{pattern:s,keys:o}=function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var s,o,i,r,n=[],a="",c=t.split("/");for(c[0]||c.shift();i=c.shift();)"*"===(s=i[0])?(n.push("wild"),a+="/(.*)"):":"===s?(o=i.indexOf("?",1),r=i.indexOf(".",1),n.push(i.substring(1,~o?o:~r?r:i.length)),a+=~o&&!~r?"(?:/([^/]+?))?":"/([^/]+?)",~r&&(a+=(~o?"?":"")+"\\"+i.substring(r))):a+="/"+i;return{keys:n,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}(t),i=e.replace(/(\?|#).*/,""),r=s.exec(i),n=s.test(i);return{active:n,params:n?o.reduce((t,e,s)=>Object.assign(Object.assign({},t),{[e]:r&&r[s+1]||""}),{}):{}}};var v;!function(t){t.ADD_ROUTE="ADD_ROUTE",t.NAVIGATE="NAVIGATE",t.SET_ACTIVE_ROUTE="SET_ACTIVE_ROUTE"}(v||(v={}));const f=t=>{var e;return e=t,window.history.pushState({},"",e),{type:v.NAVIGATE,path:t}},g=({router:{routes:t}},e)=>t&&e&&t[e]||{},m=(t,e)=>e?!!g(t,e).active:(({router:{routes:t}})=>Object.keys(t).reduce((e,s)=>e&&!t[s].active,!0))(t);var y=function(t,e,s,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,s,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(n=(r<3?i(n):r>3?i(e,s,n):i(e,s))||n);return r>3&&n&&Object.defineProperty(e,s,n),n};let O=!1;var b=t=>{let e=class extends(c(t)(r)){constructor(){super(...arguments),this.active=!1,this.params={},this.isResolving=!1,this.scrollOpt={},this.scrollDisable=!1}firstUpdated(){var e;O||(e=({pathname:e,search:s,hash:o})=>{const i=window.decodeURIComponent(e+s+o);t.dispatch((t=>({type:v.SET_ACTIVE_ROUTE,path:t}))(i))},document.body.addEventListener("click",t=>{if(t.defaultPrevented||0!==t.button||t.metaKey||t.ctrlKey||t.shiftKey)return;const s=t.composedPath().filter(t=>"A"===t.tagName)[0];if(!s||s.target||s.hasAttribute("download")||"external"===s.getAttribute("rel"))return;const o=s.href;if(!o||-1!==o.indexOf("mailto:"))return;const i=window.location,r=i.origin||i.protocol+"//"+i.host;0===o.indexOf(r)&&(t.preventDefault(),o!==i.href&&(window.history.pushState({},"",o),e(i,t)))}),window.addEventListener("popstate",t=>e(window.location,t)),e(window.location,null),O=!0);let s=this.parentElement,{path:o}=this;for(;s;){const t=s.closest("lit-route");t&&(o=`${t.path}${o}`),s=t&&t.parentElement}Boolean(this.querySelector("lit-route"))&&(o+=".*"),this.path=o,this.path&&t.dispatch((t=>({type:v.ADD_ROUTE,path:t}))(this.path))}stateChanged(t){this.active=m(t,this.path),this.params=((t,e)=>g(t,e).params||{})(t,this.path),this.active&&this.resolve&&(this.isResolving=!0,this.resolve().then(()=>{this.isResolving=!1}).catch(()=>{this.isResolving=!1})),this.active&&!this.scrollDisable&&this.scrollOpt&&(0!==Object.keys(this.scrollOpt).length?this.scrollIntoView(Object.assign({},this.scrollOpt)):window.scrollTo(0,0))}getTemplate(t,e){const s=t.replace(/[^A-Za-z0-9-]/,"");let o="";return e&&(o=Object.keys(e).map(t=>` ${t}="${this.params[t]}"`).join("")),n`${u(`<${s}${o}></${s}>`)}`}render(){return this.active?this.resolve&&this.isResolving?this.loading?this.getTemplate(this.loading):n``:this.component?this.getTemplate(this.component,this.params):n`<slot></slot>`:n``}};y([o({type:Boolean,reflect:!0})],e.prototype,"active",void 0),y([o({type:String})],e.prototype,"component",void 0),y([o({type:Object})],e.prototype,"params",void 0),y([o({type:String})],e.prototype,"path",void 0),y([o({type:Boolean})],e.prototype,"isResolving",void 0),y([o({type:Function})],e.prototype,"resolve",void 0),y([o({type:String})],e.prototype,"loading",void 0),y([o({type:Object})],e.prototype,"scrollOpt",void 0),y([o({type:Boolean})],e.prototype,"scrollDisable",void 0),e=y([i("lit-route")],e)};const E={activeRoute:"/",routes:{}},T=(t=E,{type:e="",path:s=""}={})=>{switch(e){case v.NAVIGATE:case v.SET_ACTIVE_ROUTE:return Object.assign(Object.assign({},t),{activeRoute:s,routes:Object.keys(t.routes).reduce((t,e)=>Object.assign(Object.assign({},t),{[e]:d(e,s)}),{})});case v.ADD_ROUTE:return Object.assign(Object.assign({},t),{routes:Object.assign(Object.assign({},t.routes),{[s]:d(s,t.activeRoute)})});default:return t}},j=t=>{t.addReducers({router:T}),b(t)};var w=()=>a.dispatch(p()),R=()=>a.dispatch(l()),A=t=>a.dispatch(f(t));export{j as c,w as d,R as i,A as n};
